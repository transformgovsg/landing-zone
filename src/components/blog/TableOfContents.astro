---
interface Heading {
  depth: number;
  text: string;
  slug: string;
}

interface Props {
  headings: Heading[];
}

const { headings } = Astro.props;
---

<!-- src/components/blog/TableOfContents.astro -->{
  headings.length > 0 && (
    <aside class="blog-aside flex-shrink-0 lg:sticky lg:top-4 lg:h-[calc(100vh-2rem)] lg:w-64">
      <div class="h-full rounded-lg bg-white p-4 shadow-sm">
        <button
          class="mobile-toc-toggle flex w-full items-center justify-between rounded-lg bg-white p-2 text-left text-lg font-semibold lg:hidden"
          aria-expanded="false"
          aria-controls="toc-content"
        >
          <span>Table of Contents</span>
          <svg
            class="h-5 w-5 transform transition-transform duration-200"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </button>
        <div id="toc-content" class="hidden lg:block">
          <nav class="toc-scrollbar mt-4 max-h-[calc(100vh-10rem)] overflow-y-auto lg:mt-0">
            <div class="space-y-1">
              {headings.map((heading) => (
                <a
                  href={`#${heading.slug}`}
                  style={`margin-left: ${(heading.depth - 1) * 1}rem`}
                  class:list={[
                    'toc-link text-gray-600 transition-colors hover:text-gray-900',
                    'border-l-2 border-transparent hover:border-gray-200',
                    {
                      'text-base font-medium': heading.depth === 1,
                      'text-base': heading.depth === 2,
                      'text-sm': heading.depth === 3,
                      'text-sm text-gray-500': heading.depth === 4,
                      'text-sm text-gray-400': heading.depth >= 5,
                    },
                  ]}
                >
                  {heading.text}
                </a>
              ))}
            </div>
          </nav>
        </div>
      </div>
    </aside>
  )
}
